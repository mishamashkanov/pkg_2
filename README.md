# ЛАБОРАТОРНАЯ РАБОТА №2
## АНАЛИЗАТОР ГРАФИЧЕСКИХ ФАЙЛОВ

### АВТОР
- **ФИО:** [Ваше ФИО]
- **Группа:** [Ваша группа]
- **Дата сдачи:** [Дата]
- **Дисциплина:** Компьютерная графика

### ЦЕЛЬ РАБОТЫ
Закрепление теоретического материала и практическое освоение основных возможностей по:
1. Работе с различными форматами хранения растровых изображений
2. Получению информации об изображении, хранящемся в файле

### ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ
- **Операционная система:** Windows 7/8/10/11
- **Java Runtime Environment (JRE):** версия 8 или выше
- **Оперативная память:** минимум 2 ГБ (рекомендуется 4 ГБ для больших папок)
- **Свободное место на диске:** 100 МБ

### ПОДДЕРЖИВАЕМЫЕ ФОРМАТЫ
Приложение поддерживает анализ следующих графических форматов:

1. **JPG/JPEG** - формат сжатия с потерями, используемый для фотографий
2. **GIF** - формат с поддержкой анимации, прозрачности и палитры до 256 цветов
3. **TIF/TIFF** - формат без потерь с поддержкой многостраничности и различных схем сжатия
4. **BMP** - несжатый растровый формат Windows
5. **PNG** - формат сжатия без потерь с поддержкой прозрачности
6. **PCX** - старый растровый формат для PC Paintbrush с RLE-сжатием

### ИЗВЛЕКАЕМАЯ ИНФОРМАЦИЯ
Для каждого файла программа отображает обязательную информацию согласно заданию:

#### ОБЯЗАТЕЛЬНЫЕ ХАРАКТЕРИСТИКИ:

1. **Имя файла** - название графического файла
   - **Источник:** системная информация файла
   - **Формат отображения:** оригинальное имя с расширением

2. **Размер изображения** - размер в пикселях
   - **Источник:** заголовки форматов изображений
   - **Формат отображения:** ширина × высота (например: 1920 × 1080 px)

3. **Разрешение** - плотность точек на дюйм (dot/inch)
   - **Источник:** метаданные изображений (EXIF, TIFF-теги, PNG-блоки)
   - **Формат отображения:** XX.X dpi (например: 72.0 dpi)
   - **Примечание:** если разрешение не указано в файле, отображается "Не указано"

4. **Глубина цвета** - количество бит на пиксель
   - **Источник:** заголовки форматов изображений
   - **Формат отображения:** X бит (например: 24 бит)
   - **Примеры:** 1 бит (чёрно-белое), 8 бит (256 цветов), 24 бита (true color), 32 бита (true color + alpha)

5. **Сжатие** - метод сжатия данных (если применимо)
   - **Источник:** заголовки форматов, специфичные поля
   - **Формат отображения:** название метода сжатия
   - **Примеры:** 
     - JPEG: "JPEG с квантованием"
     - GIF: "LZW"
     - PNG: "Deflate"
     - TIFF: "LZW", "ZIP", "JPEG", "без сжатия"
     - BMP: "BI_RGB (без сжатия)", "BI_RLE8", "BI_RLE4"
     - PCX: "RLE"

#### ДОПОЛНИТЕЛЬНАЯ ИНФОРМАЦИЯ (для дополнительных баллов):
- **Для JPEG:** матрица квантования, цветовое пространство (YCbCr, RGB), наличие EXIF данных
- **Для GIF:** количество цветов в палитре, наличие анимации, количество кадров
- **Для PNG:** цветовой тип (Grayscale, RGB, Palette), наличие alpha-канала, метод фильтрации
- **Для TIFF:** порядок байт (Little/Big-endian), количество каталогов IFD
- **Для BMP:** тип заголовка, размер заголовка, направление сканирования
- **Для PCX:** версия формата, количество планов цвета

### МЕТОДЫ ИЗВЛЕЧЕНИЯ ДАННЫХ

#### ИСПОЛЬЗУЕМЫЕ БИБЛИОТЕКИ:
1. **javax.imageio.ImageIO** - стандартная библиотека Java для чтения базовой информации об изображениях (размеры, формат)
2. **javax.imageio.ImageReader** - для получения метаданных изображений
3. **java.io** - для чтения бинарных данных файлов
4. **Стандартные классы Java** - для парсинга заголовков форматов

#### СПОСОБЫ ИЗВЛЕЧЕНИЯ ДАННЫХ:

##### 1. ДЛЯ ВСЕХ ФОРМАТОВ (общий подход):
- Использование ImageIO для получения размеров изображения
- Чтение бинарных заголовков файлов для получения специфичной информации
- Анализ метаданных через ImageReader.getImageMetadata()

##### 2. ДЛЯ КОНКРЕТНЫХ ФОРМАТОВ:

**JPEG/JPEG:**
- Чтение маркеров SOF (Start Of Frame) для получения глубины цвета
- Анализ маркеров APP0 (JFIF) и APP1 (EXIF) для получения разрешения
- Извлечение таблиц квантования из маркеров DQT

**GIF:**
- Парсинг заголовка GIF (13 байт) для получения размеров и информации о палитре
- Извлечение packed-байта для определения глубины цвета и размера палитры
- Анализ расширений для определения анимационных свойств

**TIFF/TIFF:**
- Определение порядка байт по первым двум байтам файла
- Чтение Image File Directory (IFD) для получения тегов
- Извлечение тегов разрешения (XResolution, YResolution)

**BMP:**
- Парсинг заголовка DIB (54+ байт) для получения размеров
- Извлечение поля biBitCount для глубины цвета
- Анализ поля biCompression для определения метода сжатия

**PNG:**
- Проверка сигнатуры PNG (8 байт)
- Чтение блока IHDR для получения размеров и информации о цвете
- Анализ полей bitDepth и colorType для определения глубины цвета

**PCX:**
- Парсинг 128-байтного заголовка PCX
- Расчет размеров из полей xMax, xMin, yMax, yMin
- Определение глубины цвета через комбинацию bitsPerPixel и planes

### АРХИТЕКТУРА ПРИЛОЖЕНИЯ

#### КЛАССЫ ПРИЛОЖЕНИЯ:

1. **Main** - точка входа в приложение
2. **ImageInfoApp** - главное окно приложения
3. **ControlPanel** - панель управления (выбор папки, кнопки управления)
4. **ImageInfoPanel** - панель отображения информации в таблице
5. **ImageInfoProcessor** - обработчик файлов, извлекает информацию
6. **ImageInfo** - класс-модель для хранения информации об изображении
7. **StatusPanel** - панель статуса и прогресса

#### ПРИНЦИП РАБОТЫ:
1. Пользователь выбирает папку через диалог выбора
2. Приложение рекурсивно сканирует папку на наличие поддерживаемых форматов
3. Для каждого файла создается отдельный поток обработки
4. Информация извлекается с использованием многопоточности для ускорения
5. Результаты отображаются в таблице в реальном времени
6. Статус обработки отображается в нижней панели

### ИНСТРУКЦИЯ ПО ЗАПУСКУ

#### СПОСОБ 1: ЗАПУСК ИЗ ИСХОДНОГО КОДА
1. Убедитесь, что установлена Java JDK 8 или выше
2. Скопируйте все файлы .java в одну папку
3. Выполните компиляцию:
   ```
   javac -encoding UTF-8 *.java
   ```
4. Запустите приложение:
   ```
   java Main
   ```

#### СПОСОБ 2: ЗАПУСК ЧЕРЕЗ BAT-ФАЙЛ
1. Запустите файл `build.bat` для компиляции проекта
2. Запустите файл `run.bat` для запуска приложения

#### СПОСОБ 3: ГОТОВЫЙ ДИСТРИБУТИВ
1. Распакуйте архив с приложением
2. Запустите файл `ImageAnalyzer.exe` (или `ImageAnalyzer.jar`)

### ИСПОЛЬЗОВАНИЕ ПРИЛОЖЕНИЯ

#### ШАГИ РАБОТЫ:
1. **Запуск приложения** - запустите приложение любым из способов
2. **Выбор папки** - нажмите кнопку "ВЫБРАТЬ ПАПКУ" в левой панели
3. **Обработка файлов** - дождитесь завершения обработки всех файлов
4. **Просмотр результатов** - информация отобразится в таблице
5. **Сортировка** - нажмите на заголовок столбца для сортировки
6. **Остановка** - при необходимости нажмите кнопку "ОСТАНОВИТЬ"

#### ОСОБЕННОСТИ РАБОТЫ:
- Приложение обрабатывает до 100 000 файлов (ограничение задания)
- Используется многопоточность для ускорения обработки
- Поддерживаются вложенные папки
- Прогресс обработки отображается в реальном времени
- При ошибке обработки одного файла, продолжается обработка остальных

### ТЕСТИРОВАНИЕ

#### ТЕСТОВЫЕ ДАННЫЕ:
1. **Маленькая папка** - несколько файлов разных форматов
2. **Большая папка** - около 600 файлов JPEG общим объемом ~2 ГБ
3. **Разноформатная папка** - файлы всех поддерживаемых форматов

#### КРИТЕРИИ ПРОВЕРКИ:
1. **Корректность данных** - сравнение с известными значениями тестовых файлов
2. **Быстродействие** - время обработки 600 файлов JPEG
3. **Устойчивость** - обработка файлов с ошибками, битыми файлами
4. **Потребление памяти** - мониторинг использования оперативной памяти

### ПРОИЗВОДИТЕЛЬНОСТЬ

#### ОПТИМИЗАЦИИ:
1. **Многопоточная обработка** - используется пул потоков по количеству ядер процессора
2. **Инкрементальное обновление** - результаты добавляются в таблицу по мере обработки
3. **Буферизированное чтение** - эффективное чтение файлов
4. **Минимальное использование памяти** - информация о файлах освобождается после обработки

#### ОЖИДАЕМЫЕ ПОКАЗАТЕЛИ:
- Обработка 600 файлов JPEG (2 ГБ): 2-5 минут
- Потребление памяти: 200-500 МБ
- Поддержка до 100 000 файлов

### ОГРАНИЧЕНИЯ

#### ИЗВЕСТНЫЕ ОГРАНИЧЕНИЯ:
1. Некоторые экзотические варианты форматов могут обрабатываться некорректно
2. Файлы с поврежденными заголовками могут вызывать ошибки
3. Очень большие файлы (более 1 ГБ) могут требовать значительного времени обработки
4. Разрешение может быть недоступно для некоторых старых файлов

### ДОПОЛНИТЕЛЬНЫЕ ВОЗМОЖНОСТИ

#### РЕАЛИЗОВАННЫЕ ДОПОЛНИТЕЛЬНЫЕ ФУНКЦИИ:
1. **Поддержка рекурсивного обхода** - обработка вложенных папок
2. **Сортировка результатов** - по любому столбцу таблицы
3. **Индикация прогресса** - визуализация процесса обработки
4. **Обработка ошибок** - продолжение работы при ошибках в отдельных файлах
5. **Экспорт результатов** - возможность сохранения таблицы в файл (при наличии реализации)

### ЗАКЛЮЧЕНИЕ

Приложение "Анализатор графических файлов" полностью соответствует требованиям лабораторной работы:
1. Поддерживает все указанные форматы (JPG, GIF, TIF, BMP, PNG, PCX)
2. Извлекает всю обязательную информацию (имя, размер, разрешение, глубина цвета, сжатие)
3. Обеспечивает удобный интерфейс для работы
4. Имеет высокую производительность при обработке большого количества файлов
5. Может работать на любом ПК с установленной Java

Приложение может использоваться для анализа графических файлов в профессиональной деятельности, а также в образовательных целях для изучения структуры различных графических форматов.
